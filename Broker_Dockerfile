# pull official base image
FROM python:3.7.4-alpine

# create working directory
RUN mkdir /code/
COPY ./src/ /code/
WORKDIR /code/

# install dependencies
RUN apk add libffi-dev gcc
COPY ./requirements_load_db.txt /code/requirements.txt
RUN pip install -r requirements.txt
copy ./set_environ.sh /code/

# run entrypoint.sh to set environment variables and start broker
ENTRYPOINT ["/code/entrypoint.sh"]

