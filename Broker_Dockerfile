# pull official base image
FROM python:3.7.4-alpine

# create working directory
RUN mkdir /code/
ADD src /code/src
WORKDIR /code/

COPY requirements_load_db.txt requirements.txt

# install dependencies
RUN apk add libffi-dev gcc
COPY requirements_load_db.txt requirements.txt
RUN pip install -r requirements.txt

# run entrypoint.sh to set environment variables and start broker
ENTRYPOINT ["/code/src/entrypoint.sh"]
